// *
// * 📁 src/styles/utils/_fun.scss
// * @description: ملف المعادلات و الدوال العامة.
// * @lastUpdatedAt:[{ "date": "2025-06-29", "by": ["BomBa"], "comment": "كتابة الكود الأساسي للملف." }]
// *
@use 'sass:math';
@use "sass:color"; // ← إضافة هذه السطر

@use './var' as *;

// #region : rtl : التحكم بالاتجاه
  // ✅ دالة تعكس الزاوية إذا كانت RTL
  @function dir($num) { 
    @if $mode == 'development' { @return ( $num * $static_dir ); }
    @return calc( $num * $dir ); }
// #endregion

// #region : em|rem|px : التحكم بالوحدات

  // /// @FUNC: Global --> em to replace px to em ...
  // /// @DISC: دالة لتحويل px إلى em
  // @function em($px, $base-font-size: 16) {
  //   @return math.div($px, $base-font-size) * 1em;
  // }
  // /// @FUNC: Global --> rem to replace px to rem ...
  // /// @DISC: دالة لتحويل px إلى rem
  // @function rem($px, $base-font-size: 16) {
  //   @return math.div($px, $base-font-size) * 1rem;
  // }
  // /// @FUNC: Global --> em to replace px to em ...
  // /// @DISC: دالة لتحويل النسبة المئوية إلى em
  // @function em_($percent, $base-font-size: 16) {
  //   @return math.div($percent, 100) * $base-font-size * 1em;
  // }

// #endregion

// #region : Color : التحكم بالالوان
  
@function to_hsla($color) {
  $h: color.channel($color, "hue", $space: hsl);
  $s: color.channel($color, "saturation", $space: hsl);
  $l: color.channel($color, "lightness", $space: hsl);
  $a: color.alpha($color); // الشفافية (1 إذا لم يكن شفافًا)

  @return hsla($h, $s, $l, $a);
}

// دالة لتحويل اللون إلى HSLA
@function get_hsl($color) {
  $h: color.channel($color, "hue", $space: hsl);
  $s: color.channel($color, "saturation", $space: hsl);
  $l: color.channel($color, "lightness", $space: hsl);
  // $a: alpha($color);
  @return "#{$h}, #{$s}, #{$l}";
}

// دالة لتغميق اللون
// @function darken-color($color, $amount) { @return mix($black, $color, $amount); } // darken-color
@function darken-color($color, $amount) { @return color-mix(in srgb, $color $amount, black); } // darken-color
// دالة لتفتيح اللون
// @function lighten-color($color, $amount) { @return mix($white, $color, $amount); } // lighten-color
@function lighten-color($color, $amount) { @return color-mix(in srgb, $color $amount, white); } // lighten-color

  /// @function: Global --> ShadowColor ...
  /// @DISC: دالة للتعامل مع لون الشادو, في حالة var(--shadow) == 1 ترجع اللون كما هو و في حالة غير ذالك يتم إرجاع الدرجة الشفافة للإيحاء بعدم وجود شادو
@function ShadowColor($color) { @if $mode == 'development' { @return $color; } @return color-mix(in srgb, $color calc(var(--shadow, 1) * 100%), transparent); }




// $color: #0d6efd;
// $hsl-color: get_hsl($color);

// :root {
//   --main: #{$hsl-color}; // إنشاء متغير CSS
//   --main-hsl: hsla(#{$hsl-color}); // إنشاء متغير CSS
// }

// h1::after {
//   background-color: hsla(var(--main), 0.2) !important;
//   // background-color: darken-color(var(--main), 50%) !important;
//   color: var(--main-hsl) !important;
//   content: "لون: #{$hsl-color}"; // محتوى نصي
// }

// يبدو ان هناك مشكلة في دالة darken-color ؟؟

// #endregion
